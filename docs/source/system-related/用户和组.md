
# [Ubuntu 16.04]用户和组

参考：

[Directories and the Set-User-ID and Set-Group-ID Bits](https://www.gnu.org/software/coreutils/manual/html_node/Directory-Setuid-and-Setgid.html)

[Permissions](https://wiki.debian.org/Permissions)

在Linux系统中每次登录均以用户的身份进行操作

每个用户属于一个或多个组，同一组内的用户共享组权限，比如一个文件设置为组可修改，那么属于同一组内的其他用户也可修改该文件

常用命令：

1. stat：显示文件或文件系统状态
2. ls：列出目录内容
3. umask：设置文件模式创建掩码

## 查看文件系统的状态

    $ stat /home/zj/
    File: '/home/zj/'
    Size: 4096      	Blocks: 8          IO Block: 4096   directory
    Device: 10304h/66308d	Inode: 17039361    Links: 53
    Access: (0755/drwxr-xr-x)  Uid: ( 1000/      zj)   Gid: ( 1000/      zj)
    Access: 2019-02-24 15:43:55.344024704 +0800
    Modify: 2019-02-24 15:27:08.247767421 +0800
    Change: 2019-02-24 15:27:08.247767421 +0800
    Birth: -

    $ stat /
      File: '/'
      Size: 4096      	Blocks: 8          IO Block: 4096   directory
    Device: 10303h/66307d	Inode: 2           Links: 24
    Access: (0755/drwxr-xr-x)  Uid: (    0/    root)   Gid: (    0/    root)
    Access: 2019-02-24 15:26:55.191767471 +0800
    Modify: 2019-01-11 20:55:22.710805402 +0800
    Change: 2019-01-11 20:55:22.710805402 +0800
      Birth: -

## 查看目录列表权限

    $ ls -l
    total 16
    drwxrwxr-x 4 zj zj 4096 2月  17 18:59 build
    -rw-rw-r-- 1 zj zj  791 1月  12 11:52 make.bat
    -rw-rw-r-- 1 zj zj  584 1月  12 11:52 Makefile
    drwxrwxr-x 9 zj zj 4096 2月  24 15:52 source

其中权限部分在第一列

    drwxrwxr-x

第一字节表示节点类型（node type）：`-`表示文件；`d`表示目录；`l`表示符号链接；`c`表示字符设备；`p`表示伪终端；`b`表示块设备

接下来9个字符分为3块，分别代表用户、组和其他的权限；每块3个字符，分别代表读、写和执行权限

r表示读；w表示写；x表示执行；-表示没有权限

## 不同数字代表权限信息

每个文件针对持有者（owner）、组（group）和其他（group）均设置一个8进制数字（octal number），每个数字的取值范围是0-7，是1、2、4的组合值

* 4：读权限。允许读取文件内容或者列出目录内容列表。目录内容包括了文件名、子目录名，以及其他文件系统对象，同时包括了一些元信息，比如该文件系统对象是文件还是目录，在这个对象上的权限等等
* 2：写权限。可以修改文件内容。对于目录而言，他允许主题修改记录在目录中的内容。这意味着能够在目录中创建文件，或等效地将文件移动到目录中；从目录中删除文件，或等效地将文件移出目录；并且，由于目录中存在目录内容的记录，因此可以修改目录中包含的每个文件或子目录的权限
* 1：执行权限。可以执行该文件。任何文件都可以标记为可执行；当内容不执行时，运行时会报告错误。同样，任何文件都可以删除执行权限；具有可执行内容但没有执行权限的文件无法运行。对于目录而言，执行权限允许主题遍历目录进入子目录。**注意，目录遍历不需要读取权限。**

## 文件和目录权限的关系

文件权限以来于目录权限

## 新文件和新目录的默认权限

通过掩码设置

可通过命令修改

## 修改文件权限

使用命令chmod

## 访问权限列表

ACL用于指定用户权限，不论其是否在同一组中