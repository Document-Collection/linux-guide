
# 系统服务

系统服务设计的内容比较复杂，下面根据已有服务配置进行逐步分析

## sshd.service

进入目录`/etc/systemd/system`打开文件`sshd.service`

```
$ cat sshd.service 
[Unit]
Description=OpenBSD Secure Shell server
After=network.target auditd.service
ConditionPathExists=!/etc/ssh/sshd_not_to_be_run

[Service]
EnvironmentFile=-/etc/default/ssh
ExecStart=/usr/sbin/sshd -D $SSHD_OPTS
ExecReload=/bin/kill -HUP $MAINPID
KillMode=process
Restart=on-failure
RestartPreventExitStatus=255
Type=notify

[Install]
WantedBy=multi-user.target
Alias=sshd.service
```

服务分为3部分，





下面实现能够开机自启动，意外结束后自动重启的服务





实现功能：

1. 开机自启动
2. 意外结束后自动重启


如何注册服务




参考：

[第十七章、认识系统服务 （daemons）](https://wizardforcel.gitbooks.io/vbird-linux-basic-4e/content/147.html)

[How to create systemd service unit in Linux ](https://linuxconfig.org/how-to-create-systemd-service-unit-in-linux)

[systemd](https://wiki.archlinux.org/index.php/systemd)

systemd.service编写

[SYSTEMD.SERVICE](http://man7.org/linux/man-pages/man5/systemd.service.5.html)

[systemd.service](http://manpages.ubuntu.com/manpages/xenial/man5/systemd.service.5.html#examples)

使用工具：systemctl （用于替代service）

[systemctl](http://man7.org/linux/man-pages/man1/systemctl.1.html)